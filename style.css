body {
  margin: 0;
  padding: 0;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(to bottom right, #fff0f5, #ffe4e1);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}



.chat-container {
  position: relative; /* Для позиціонування кнопки галереї */
  display: flex;
  flex-direction: column;
  justify-content: flex-start; /* Змінюємо, щоб елементи притискалися до верху */
  align-items: stretch;
  background-color: white;
  border: 2px solid #ffb6c1;
  border-radius: 20px;
  padding: 20px;
  width: 90%;
  max-width: 500px;
  height: 90vh;
  box-shadow: 0 4px 12px rgba(255, 182, 193, 0.5);
}

h1 {
  text-align: center;
  color: #d63384;
  font-size: 1.4rem;
  margin: 0 0 5px 0; /* Зменшено нижній відступ */
}

.message-baby {
  background-color: #b5c8fd !important; /* світло-рожевий, додамо !important для перекриття */
  color: #031e58; /* cиній */
  font-weight: bold;
  align-self: flex-end; /* Baby повідомлення справа */
  border-top-left-radius: 0;
}
.message-cloud {
  background-color: rgb(248, 228, 241) !important; /* блакитний, додамо !important для перекриття */
  align-self: flex-start; /* Cloud повідомлення зліва */
  border-top-right-radius: 0;
  color: #ff75a3; 
  font-weight: bold;
}


.chat-box {
  display: flex;
  flex-direction: column;
  background-color: #fffafc;
  border: 1px solid #f8cdda;
  border-radius: 10px;
  padding: 10px;
  flex-grow: 1;
  overflow-y: auto;
  font-size: 1rem;
  /* max-height: 55vh; */ /* Максимальна висота чату, щоб не вилазило за межі контейнера */
  position: relative; /* Для позиціонування індикатора набору тексту, якщо знадобиться */
}

.message {
  margin: 5px;
  padding: 10px 15px; 
  /* background-color: #f0f0f0;  Прибираємо загальний фон, щоб не конфліктував */
  position: relative; /* Для позиціонування кнопок дій */
  border-radius: 15px;
  max-width: 75%;               /* Зменшено для кращого розміщення кнопок */
  word-break: break-word;        /* ✅ Ламає слова */
  white-space: pre-wrap;         /* ✅ Переносить \n і довгі рядки */
  overflow-wrap: break-word;     /* ✅ Браузерна підтримка */
  box-sizing: border-box;
  font-size: 1rem; /* Зменшуємо розмір шрифту для кращого вигляду */
  animation: fadeIn 0.3s ease;
  padding-right: 35px; /* Додаємо місце справа для кнопок, щоб текст не залазив під них */
}

/* Стилі для індикатора набору тексту всередині чату */
.typing-message-in-chat {
  padding: 8px 12px;
  margin: 5px 10px 0px 10px; /* Верхній відступ 5px, нижній 0px */
  font-style: italic;
  color: #777; /* Сірий колір тексту */
  background-color: #f9f9f9; /* Дуже світлий фон */
  border-radius: 10px; /* Легке закруглення */
  font-size: 0.6rem;
  text-align: center; /* Додаємо для центрування тексту */
  min-height: 1.2em; /* Мінімальна висота, щоб текст не зливався з іншими повідомленнями */
}

/* Стилі для кнопок дій над повідомленням (Редагувати, Видалити) */
.message-actions {
  position: absolute;
  top: 50%; /* Вирівнювання по центру по вертикалі */
  transform: translateY(-50%);
  display: flex;
  flex-direction: row; /* Розташування кнопок в ряд */
  gap: 4px;    /* Проміжок між кнопками */
  /* background-color: rgba(255, 255, 255, 0.7); - Можна прибрати, якщо не потрібен фон */
  /* padding: 2px 4px; - Можна прибрати або налаштувати */
  /* border-radius: 5px; - Можна прибрати або налаштувати */
  z-index: 1; /* Щоб були поверх тексту повідомлення, якщо текст дуже довгий */
  
  /* Якщо ви хочете, щоб кнопки з'являлися при наведенні: */
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
}

.message-actions.actions-left {
  right: 100%; 
  margin-right: 5px; /* Трохи зменшимо відступ від повідомлення зліва */
}

.message-actions.actions-right {
  left: 100%;
  margin-left: 5px; /* Трохи зменшимо відступ від повідомлення справа */
}

.message:hover .message-actions {
  /* display: flex; - Замінюємо на visibility/opacity для плавного з'явлення */
  visibility: visible;
  opacity: 1;
}

.action-btn { /* Загальні стилі для кнопок дій */
  background-color: rgba(255, 255, 255, 0.85); /* Світлий фон з прозорістю */
  border: 1px solid rgba(0, 0, 0, 0.1); /* Легка обводка */
  border-radius: 50%; /* Робимо кнопку круглою */
  width: 28px;        /* Ширина кнопки */
  height: 28px;       /* Висота кнопки */
  cursor: pointer;
  font-size: 0.9rem; /* Розмір іконок, можна трохи збільшити */
  padding: 0;         /* Прибираємо внутрішні відступи, щоб іконка центрувалася */
  line-height: 1; /* Для кращого вирівнювання іконок */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s ease, border-color 0.2s ease; /* Плавний перехід для hover */
}

.action-btn.edit-btn {
  color: #007bff; /* Синій для редагування */
}
.action-btn.edit-btn:hover {
  color: #0056b3;
  background-color: rgba(0, 123, 255, 0.1); /* Світло-синій фон при наведенні */
}

.action-btn.delete-btn {
  color: #dc3545; /* Червоний для видалення */
}
.action-btn.delete-btn:hover {
  color: #a71d2a;
  background-color: rgba(220, 53, 69, 0.1); /* Світло-червоний фон при наведенні */
}

/* Стилі для кнопки "Відповісти" (якщо ще не додані або для уточнення) */
.action-btn.reply-btn {
  color: #17a2b8; /* Бірюзовий для відповіді */
}
.action-btn.reply-btn:hover {
  color: #117a8b;
  background-color: rgba(23, 162, 184, 0.1); /* Світло-бірюзовий фон при наведенні */
}

/* Стилі для поля редагування повідомлення */
.edit-message-input {
  width: calc(100% - 10px); /* Займає майже всю ширину повідомлення, враховуючи відступи */
  padding: 6px 8px;
  margin: 5px 0;
  border: 1px solid #ccc;
  border-radius: 5px;
  font-family: inherit; /* Успадковує шрифт від батьківського елемента */
  font-size: inherit;   /* Успадковує розмір шрифту */
  resize: vertical;     /* Дозволити змінювати висоту textarea */
  box-sizing: border-box;
}

/* Кнопки Зберегти/Скасувати під час редагування */
.message .save-edit-btn, 
.message .cancel-edit-btn { 
  margin-top: 5px;
  /* margin-right: 5px; - Перенесемо це на конкретну кнопку для кращого контролю */
  padding: 5px 40px; /* Ще більше збільшено внутрішні відступи */
  border-radius: 4px;
  font-size: 0.85rem;
  color: white;
  border: none;
  cursor: pointer;
  white-space: nowrap; /* Забороняємо перенос тексту */
  display: inline-flex; /* Для правильного розрахунку розмірів та центрування */
  align-items: center;
  justify-content: center;
  line-height: 1; /* Для кращого вертикального вирівнювання */
}
.message .save-edit-btn {
  background-color: #28a745; /* Зелений для збереження */
}
.message .save-edit-btn:hover {
  background-color: #1e7e34;
}
.message .cancel-edit-btn {
  background-color: #6c757d; /* Сірий для скасування */
  margin-left: 8px; /* Збільшимо відступ між кнопками */
}
.message .cancel-edit-btn:hover {
  background-color: #545b62;
}

@keyframes fadeIn {
  from {opacity: 0; transform: translateY(10px);}
  to {opacity: 1; transform: translateY(0);}
}

.input-area {
  display: flex;
  margin-top: 10px;
  gap: 10px;
}

.input-area input {
  flex-grow: 1;
  padding: 10px;
  border: 1px solid #f8cdda;
  border-radius: 10px;
  font-size: 1rem;
  background-color: #fff0f5;
}

.input-area button {
  padding: 10px 20px;
  background-color: #ff69b4;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.input-area button:hover {
  background-color: #ff1493;
}

.online-users {
  font-size: 0.9rem;
  color: #187537;
  width: 100%; 
  text-align: center;
  margin-top: 10px;
}

.users-online {
  text-align: center;
  margin-top: 5px; /* Додано/змінено верхній відступ */
}

.status-messages-container {
  width: 100%; /* Займає всю доступну ширину */
  display: flex;
  flex-direction: column; /* Елементи всередині йдуть один під одним */
  align-items: center; /* Центрує дочірні елементи по горизонталі */  
}

.upload-indicator {
  font-size: 0.9rem;
  color: #d63384; /* Рожевий колір, як у заголовка */  
  margin-top: 5px; /* Додано/змінено верхній відступ */
  text-align: center;
}

/* Адаптивність */
@media (max-width: 600px) {
  .chat-container {
    padding: 15px;
    margin-left: 5%;
    margin-right: 5%;
    height: 95vh;
  }

  .chat-box {
  flex-grow: 1;
  overflow-y: auto;
  overflow-x: hidden;       /* 🔴 Заборонити горизонтальну прокрутку */
  max-height: 60vh;
  padding: 10px;
  background-color: #fffafc;
  border: 1px solid #f8cdda;
  border-radius: 10px;
  font-size: 1rem;
  box-sizing: border-box;   /* ✅ Важливо для обмеження розміру */
  word-wrap: break-word;    /* ✅ Розрив слів */
}


 
}

.media-controls-area {
  display: flex; /* Встановлюємо flex-контейнер для розташування елементів в ряд */
  align-items: center; /* Вирівнюємо елементи по центру вертикально */
  gap: 10px; /* Проміжок між блоком пісень та регулятором гучності */
  margin-top: 5px; /* Зменшено верхній відступ */
  margin-bottom: 0px; /* Прибрано нижній відступ */
}

.items {
  display: flex;
  background-color: rgb(249, 227, 255);
  border-radius: 8px;
  border: 1px solid #ffc0f5;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
  height: 50px;
  overflow-x: auto;       /* Горизонтальна прокрутка при необхідності */
  overflow-y: hidden;     /* Запобігання вертикальній прокрутці */
  gap: 8px;
  padding: 10px;
  box-sizing: border-box; /* Включаємо padding та border в розрахунок розмірів */
  flex-grow: 1;           /* Дозволяє блоку .items зайняти доступний вільний простір */
  min-width: 0;           /* Важливо для flex-елементів з overflow, дозволяє стискатися */
}

.item-btn {
  display: flex;
  flex-shrink: 0;
  background-color: #ffe4e1; /* Світло-рожевий фон, як у повідомлень */
  border: 1px solid #ffb6c1; /* Рожева рамка */
  color: #11460f; /* Колір іконки, як у заголовка H1 */
  border-radius: 8px; /* Закруглені кути */
  padding: 6px 10px; /* Внутрішні відступи кнопки */  
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.1s ease;
  display: inline-flex; /* Для кращого вирівнювання іконки */
  align-items: center;
  justify-content: center;
  line-height: 1; /* Прибирає зайву висоту рядка від шрифту */
  min-height: 36px; /* Мінімальна висота кнопки */
}

.item-btn:hover {
  background-color: #ffb6c1; /* Світло-рожевий фон при наведенні */
  transform: scale(1.05); /* Збільшення кнопки при наведенні */
}

.item-btn.playing {
  background-color: #ff69b4; /* Колір активної кнопки (як кнопка "Надіслати") */
  color: white;
  border-color: #ff1493; /* Темніша рамка для активної кнопки */
}

.volume-control {
  display: flex;
  align-items: center;
  flex-shrink: 0; /* Забороняє цьому блоку стискатися, гарантуючи його відображення */
}

/* Стилі для повзунка гучності */
.volume-slider {
  -webkit-appearance: none; /* Скидаємо стандартний вигляд для WebKit */
  appearance: none;         /* Скидаємо стандартний вигляд для інших браузерів */
  width: 100px; /* Ширина повзунка гучності */
  margin-left: 8px; /* Відступ від кнопки-іконки */
  height: 20px; /* Загальна висота контейнера повзунка, для вирівнювання */
  vertical-align: middle;
  background: transparent; /* Робимо фон контейнера прозорим */
  cursor: pointer;
}

/* Стилізація доріжки (треку) для WebKit (Chrome, Safari, Edge) */
.volume-slider::-webkit-slider-runnable-track {
  width: 100%;
  height: 8px;
  background: #ffe4e1; /* Світло-рожевий фон, як у повідомлень або кнопок */
  border: 1px solid #ffc0f5; /* Рожева рамка, як у .items */
  border-radius: 10px; /* Закруглені кути, як у багатьох елементів */
}

/* Стилізація бігунка (повзунка) для WebKit */
.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  margin-top: -5px; /* (Висота бігунка - висота доріжки) / 2 + товщина рамки доріжки, якщо вона є зверху */
  width: 18px;
  height: 18px;
  background: #ff69b4; /* Основний рожевий колір, як у активних кнопок */
  border-radius: 50%; /* Робимо бігунок круглим */
  border: 2px solid white; /* Біла обводка для контрасту */
  box-shadow: 0 0 2px rgba(0,0,0,0.2); /* Легка тінь */
}

/* Стилізація доріжки для Firefox */
.volume-slider::-moz-range-track {
  width: 100%;
  height: 8px;
  background: #ffe4e1;
  border: 1px solid #ffc0f5;
  border-radius: 10px;
}

/* Стилізація бігунка для Firefox */
.volume-slider::-moz-range-thumb {
  width: 14px; /* Трохи менший, бо Firefox може додавати свою рамку */
  height: 14px;
  background: #ff69b4;
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 0 2px rgba(0,0,0,0.2);
}

.chat-input {
   flex-grow: 1;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  resize: none; /* Заборонити ручну зміну розміру, якщо хочеш */
  font-family: inherit;
  font-size: 1rem;
  line-height: 1.4; /* Змінено для кращого вигляду в один рядок */
  height: 20px; /* мінімальна висота */
  max-height: 150px; 
  margin-top: 5px; /* Зменшений відступ */
  margin-bottom: 5px; /* Зменшений відступ */
  overflow-y: auto;
}

.input-controls {
  display: flex;
  align-items: center; /* Вирівнюємо елементи по вертикалі */
  gap: 8px; /* Проміжок між елементами */
  margin-top: 5px; /* Зменшено верхній відступ */
  margin-bottom: 0px; /* Прибираємо відступ знизу, щоб наблизити до блоку статусів */
  position: relative; /* Важливо для позиціонування панелі емодзі */
}

.chat-button {
  padding: 10px 20px;
  background-color: #ff69b4;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background-color 0.3s ease;
  flex-shrink: 0; /* Щоб кнопка не стискалася */
}

.attach-btn {
  padding: 8px 12px; /* Трохи менші відступи */
  background-color: #ffc0f5; /* Світліший колір */
  color: #d63384; /* Колір іконки */
  border: 1px solid #ffb6c1;
  border-radius: 8px;
  font-size: 1.2rem; /* Розмір іконки */
  cursor: pointer;
  transition: background-color 0.3s ease;
  flex-shrink: 0;
}
.attach-btn:hover {
  background-color: #ffb6c1;
}

/* Стилі для кнопки та панелі емодзі */
.emoji-toggle-btn {
  padding: 8px 10px;
  background-color: #fde4f0; /* Світліший рожевий */
  color: #d63384; /* Колір іконки, як у заголовка */
  border: 1px solid #ffc0cb; /* Рожева рамка */
  border-radius: 8px;
  font-size: 1.2rem; /* Розмір іконки */
  cursor: pointer;
  transition: background-color 0.3s ease;
  flex-shrink: 0; /* Щоб кнопка не стискалася */
  line-height: 1; /* Для кращого вирівнювання іконки */
}

.emoji-toggle-btn:hover {
  background-color: #ffc0cb; /* Світло-рожевий при наведенні */
}

.emoji-panel {
  position: absolute;
  bottom: 100%; /* Розміщуємо панель над блоком .input-controls */
  left: 0; /* Вирівнюємо по лівому краю .input-controls */
  width: 100%; /* Ширина панелі така ж, як .input-controls */
  max-width: 320px; /* Обмежуємо максимальну ширину */
  margin-bottom: 8px; /* Невеликий відступ між панеллю та полем вводу */
  background-color: white;
  border: 1px solid #ffb6c1; /* Рожева рамка, як у чата */
  border-radius: 10px;
  padding: 10px;
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); /* Тінь зверху */
  z-index: 100; /* Поверх інших елементів, але нижче модальних вікон */
  display: grid; /* Використовуємо grid для розміщення емодзі */
  grid-template-columns: repeat(auto-fill, minmax(35px, 1fr)); /* Адаптивні колонки */
  gap: 8px; /* Проміжок між емодзі */
  max-height: 150px; /* Максимальна висота панелі, з'явиться прокрутка */
  overflow-y: auto; /* Вертикальна прокрутка при необхідності */
  box-sizing: border-box;
}

.emoji-panel span {
  padding: 4px;
  font-size: 1.6rem; /* Розмір емодзі */
  cursor: pointer;
  text-align: center;
  border-radius: 5px;
  transition: background-color 0.2s ease;
}

.emoji-panel span:hover,
.emoji-panel span:focus {
  background-color: #ffe4e1; /* Світло-рожевий фон при наведенні/фокусі */
  outline: none;
}

/* === Додай цей код в кінець файлу style.css === */

/* Стилі для екрану входу */
.login-screen {
  background-color: white;
  border: 2px solid #ffb6c1; /* Рожева рамка, як у чата */
  border-radius: 20px;       /* Закруглені кути */
  padding: 30px;             /* Внутрішні відступи */
  width: 80%;
  max-width: 400px;          /* Можна зробити трохи вужчим за чат */
  box-shadow: 0 4px 12px rgba(255, 182, 193, 0.5); /* Тінь, як у чата */
  display: flex;
  flex-direction: column;
  align-items: center;       /* Центрування вмісту по горизонталі */
  text-align: center;        /* Центрування тексту для h2 та p */  
}

.login-screen h2 {
  color: #d63384;             /* Колір тексту заголовка, як у чата */
  font-size: 1.6rem;         /* Розмір шрифту */
  margin-top: 0;             /* Прибираємо верхній відступ, якщо є */
  margin-bottom: 25px;       /* Відступ знизу */
}

.login-screen input[type="password"] {
  width: 85%;                /* Ширина поля вводу */
  padding: 12px;
  border: 1px solid #f8cdda; /* Світло-рожева рамка */
  border-radius: 10px;
  font-size: 1rem;
  background-color: #fff0f5; /* Дуже світло-рожевий фон */
  margin-bottom: 20px;
  box-sizing: border-box;
}

/* Загальні стилі для всіх кнопок на екрані входу */
.login-screen button {
  padding: 12px 25px;
  background-color: #ff69b4; /* Основний рожевий колір кнопки */
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background-color 0.3s ease;
  margin-top: 10px;          /* Відступ зверху для головної кнопки "Увійти" */
  width: 85%;                /* Ширина кнопок */
  box-sizing: border-box;
}

.login-screen button:hover {
  background-color: #ff1493; /* Темніший рожевий при наведенні */
}

#nicknameSelection {
  margin-top: 15px;          /* Відступ зверху перед вибором нікнейму */
  margin-bottom: 5px;        /* Невеликий відступ знизу перед кнопкою "Увійти" */
  width: 100%;               /* Щоб align-items працював коректно */
  display: flex;
  flex-direction: column;
  align-items: center;
}

#nicknameSelection p {
  margin-bottom: 10px;
  color: #555;               /* Колір тексту для підказки */
  font-size: 1rem;
}

/* Специфічні налаштування для кнопок вибору нікнейму */
#nicknameSelection button {
  margin-top: 0;             /* Прибираємо верхній відступ, успадкований від .login-screen button */
  margin-bottom: 10px;       /* Відступ між кнопками нікнеймів */
}

#nicknameSelection button:last-child {
  margin-bottom: 0;          /* Прибираємо нижній відступ для останньої кнопки нікнейму */
}

#loginError {
  margin-top: 15px;
  font-size: 0.9rem;
  /* колір вже заданий inline стилем style="color:red;" в HTML, тому тут його не дублюємо */
}

/* === Кінець коду для додавання === */

/* === Стилі для модального вікна зображення з чату (щоб було схоже на чат) === */
#chatImageDisplayModal .gallery-content {
  /* Перевизначення/скидання деяких стилів від загального .gallery-content */
  width: auto; /* Ширина визначається вмістом, до max-width */
  height: auto; /* Висота визначається вмістом */
  max-width: 550px; /* Трохи більше, ніж чат, для кращого перегляду фото */
  display: block; /* Простіше, ніж flex, якщо всередині лише зображення та відступи */
  justify-content: initial; /* Скидання, якщо успадковано */
  align-items: initial; /* Скидання, якщо успадковано */

  /* Стилі, схожі на .chat-container */
  background-color: white;
  border: 2px solid #ffb6c1; /* Рамка, як у чата */
  border-radius: 20px;       /* Закруглені кути, як у чата */
  box-shadow: 0 4px 12px rgba(255, 182, 193, 0.5); /* Тінь, як у чата */
  padding: 20px;             /* Внутрішні відступи, як у чата */
  position: relative;        /* Для можливого позиціонування дочірніх елементів */
}

#chatImageDisplayModal #chatDisplayImage {
  display: block; /* Забирає зайвий простір знизу, якщо зображення inline */
  max-width: 100%; /* Максимальна ширина відносно батьківського .gallery-content з відступами */
  max-height: 70vh; /* Максимальна висота зображення, щоб модальне вікно не було занадто великим */
  object-fit: contain; /* Зберігає пропорції зображення */
  border-radius: 10px; /* Невелике закруглення для самого зображення */
}

/* Кнопка закриття для #chatImageDisplayModal вже стилізована через .gallery-close-btn */
/* Вона буде у верхньому правому куті екрану, що є стандартним для модальних вікон */

/* === Стилі для галереї зображень === */
.gallery-toggle-btn {
  position: absolute;
  top: 12px; /* Зменшуємо відступ зверху, щоб підняти кнопку */
  right: 15px; /* Відступ справа */
  background-color: #ffc0f5; /* Світло-рожевий, як фон .items */
  border: 1px solid #ffb6c1; /* Рожева рамка */
  color: #d63384; /* Колір іконки, як заголовок */
  border-radius: 50%; /* Кругла кнопка */
  width: 40px;
  height: 40px;
  font-size: 1.5rem; /* Розмір іконки */
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10; /* Щоб була поверх інших елементів чату */
  padding: 0;
  line-height: 1;
}

.gallery-toggle-btn:hover {
  background-color: #ffb6c1;
  transform: scale(1.1);
}

.gallery-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 228, 225, 0.9); /* Напівпрозорий рожевий фон */
  display: none; /* Початково приховано */
  align-items: center;
  justify-content: center;
  z-index: 1000; /* Поверх усього */
  padding: 20px;
  box-sizing: border-box;
  opacity: 0; /* Початкова прозорість для анімації, буде змінена класом .show */
}

/* Анімація для появи модального вікна галереї */
@keyframes fadeInModal {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Анімація для зникнення модального вікна галереї */
@keyframes fadeOutModal {
  from {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  to {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
}

.gallery-modal.show {
  display: flex; /* Цей клас робить вікно видимим */
  animation: fadeInModal 0.4s ease-out forwards;
  opacity: 1; /* Переконуємося, що кінцева прозорість 1 */
}

.gallery-modal.hide {
  /* display: flex; залишається, щоб анімація зникнення була видима */
  animation: fadeOutModal 0.4s ease-out forwards;
}

.gallery-close-btn {
  position: absolute;
  top: 20px;
  right: 30px;
  background: #ff69b4;
  color: white;
  border: 2px solid white;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  font-size: 2rem;
  line-height: 36px; /* Для центрування хрестика */
  text-align: center;
  cursor: pointer;
  z-index: 1002;
  padding: 0;
}

.gallery-content {
  position: relative;
  width: 95%; /* Збільшуємо ширину контенту галереї */
  height: 90%;
  display: flex;
  align-items: center;
  justify-content: space-between; /* Розміщує кнопки по боках */
}

.gallery-images-container {
  display: flex;
  overflow-x: auto; /* Горизонтальна прокрутка */
  scroll-snap-type: x mandatory; /* Плавне прилипання до зображень при скролі */
  scroll-snap-stop: always; /* Завжди зупинятися на точці прилипання */
  -webkit-overflow-scrolling: touch; /* Плавний скрол на iOS */
  width: 100%; /* Контейнер займає всю доступну ширину */
  height: 100%; /* Контейнер займає всю доступну висоту */
  align-items: center; /* Вертикальне центрування зображень */
  /* gap: 20px; - Прибираємо, щоб зображення займали всю ширину */
  /* padding: 0 10px; - Прибираємо, щоб не було зайвих відступів */
}

.gallery-images-container img {
  width: 100%; /* Кожне зображення займає 100% ширини контейнера */
  height: 100%; /* Кожне зображення займає 100% висоти контейнера */
  object-fit: cover; /* Зберігає пропорції, заповнюючи контейнер та обрізаючи зайве */
  scroll-snap-align: center; /* Центрує зображення при "прилипанні" */
  border-radius: 10px; /* Закруглені кути для зображень */
  box-shadow: 0 4px 15px rgba(0,0,0,0.2); /* Тінь для зображень */
  flex-shrink: 0; /* Запобігає стисканню зображень, якщо їх багато */
}

.gallery-nav-btn {
  display: none !important; /* Приховуємо кнопки навігації, !important для гарантії */
  background-color: rgba(255, 240, 245, 0.85); /* Дуже світлий, напівпрозорий лавандово-рожевий */
  color: #d63384; /* Основний рожевий колір для іконки, як у заголовка */
  border: 2px solid rgba(255, 105, 180, 0.5); /* Напівпрозора рожева рамка */
  border-radius: 50%;
  width: 50px;
  height: 50px;
  font-size: 1.8rem; /* Трохи зменшимо розмір стрілок для витонченості */
  cursor: pointer;
  transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
  z-index: 1001;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin: 0 10px; /* Відступи від країв екрану/контейнера зображень */
  box-shadow: 0 2px 5px rgba(214, 51, 132, 0.15); /* Легка, м'яка тінь */
}

.gallery-nav-btn:hover {
  background-color: rgba(255, 228, 225, 0.95); /* Світліший, майже непрозорий рожевий (MistyRose) */
  border-color: #ff69b4; /* Яскравіша рожева рамка */
  transform: scale(1.05); /* Невелике збільшення */
  box-shadow: 0 4px 8px rgba(214, 51, 132, 0.25); /* Більш виразна тінь */
}

.finger-lightning-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1px; /* Зменшуємо проміжок, щоб пальці могли бути ближче */
  position: relative;
  font-size: 2rem;
  margin-top: 10px;
}

.finger {
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-timing-function: ease-in-out; /* Плавніший рух */
}

.finger.left {
  animation-name: moveRight;
}

.finger.right {
  animation-name: moveLeft;
}

@keyframes moveRight {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(20px); } /* Збільшуємо зміщення для лівого пальця */
}

@keyframes moveLeft {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(-20px); } /* Збільшуємо зміщення для правого пальця */
}

.lightning {
  width: 30px;
  height: 30px;
  background: url('img/lightning.svg') center center no-repeat;
  background-size: contain;
  animation: flash 0.5s infinite;
}

@keyframes flash {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.2; }
}

.chat-image-thumbnail {
  max-width: 150px; /* Максимальна ширина мініатюри */
  max-height: 150px; /* Максимальна висота мініатюри */
  border-radius: 8px;
  border: 1px solid #f8cdda;
  margin-top: 5px; /* Відступ від тексту повідомлення, якщо є */
  cursor: pointer;
  object-fit: cover; /* Щоб зображення заповнювало мініатюру, зберігаючи пропорції */
}

.message-sender { /* Стиль за замовчуванням для текстових повідомлень */
  display: inline; /* Нікнейм та текст в одному рядку */
  font-weight: bold;
  /* margin-bottom: 4px; - Прибираємо, не потрібен для inline */
}

.message-sender.message-sender-image { /* Спеціальний стиль для повідомлень із зображенням */
  display: block; /* Нікнейм над зображенням */
  margin-bottom: 4px;
  /* font-weight: bold; - Вже успадковано від .message-sender */
}

.message-text-content {
  display: inline-block; /* Дозволяє елементу бути в рядку, але обробляти переноси всередині себе */
  vertical-align: top;   /* Вирівнює верхню межу тексту повідомлення з верхньою межею нікнейма */
  word-break: break-word;  /* Додатково для кращого переносу слів, хоча це вже є на .message */
}

.message-edited-indicator {
  font-style: italic;
  color: #a7a7a7; /* Сірий колір, схожий на індикатор набору тексту */
  font-size: 0.65rem; /* Малий розмір шрифту, трохи збільшено для тесту */
  margin-left: 5px; /* Невеликий відступ зліва для відокремлення */
}

.message-reply-quote {
  background-color: rgba(0, 0, 0, 0.05); /* Трохи темніший фон для цитати */
  padding: 5px 8px;
  margin-bottom: 5px; /* Відступ від основного тексту повідомлення */
  border-left: 3px solid #adb5bd; /* Сіра лінія зліва */
  border-radius: 4px;
  font-size: 0.85em;
  color: #495057;
  cursor: pointer; /* Вказує, що можна клікнути */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.reply-preview {
  display: flex;
  align-items: center;
  justify-content: space-between; /* Розміщує текст і кнопку по краях */
  padding: 8px 12px;
  background-color: #f8f9fa; /* Світлий фон */
  border-top: 1px solid #e9ecef; /* Лінія зверху для відділення */
  border-bottom: 1px solid #e9ecef; /* Лінія знизу */
  margin: 5px 0; /* Відступи зверху та знизу */
  font-size: 0.9rem;
}

.reply-preview-content {
  flex-grow: 1; /* Дозволяє тексту зайняти доступний простір */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-right: 10px; /* Відступ від кнопки скасування */
}

.reply-preview-content strong {
  font-weight: bold;
}

.message-reply-quote strong {
  color: #0056b3; /* Колір для імені автора цитати */
}

.message-reply-quote:hover {
  background-color: rgba(0, 0, 0, 0.08);
}

.highlight-message {
  animation: highlightAnimation 1.5s ease-out;
}

@keyframes highlightAnimation {
  0% { background-color: rgba(255, 255, 0, 0.5); } /* Початок з жовтим підсвічуванням */
  70% { background-color: rgba(255, 255, 0, 0.5); } /* Тримаємо підсвічування */
  100% { background-color: transparent; } /* Повертаємо до прозорого (або оригінального кольору повідомлення) */
}

/* Кольори для нікнейму користувача в попередньому перегляді відповіді */
#replyPreviewUser.reply-user-baby-color {
  color: #031e58; /* Синій колір для Baby 😎 (як у .message-baby) */
}

#replyPreviewUser.reply-user-cloud-color {
  color: #ff75a3; /* Рожевий колір для Pink Cloud ☁️ (як у .message-cloud) */
}

/* Кольори для нікнейму користувача В ЦИТАТІ ВІДПРАВЛЕНОГО ПОВІДОМЛЕННЯ */
.message-reply-quote strong.reply-quote-user-baby-color {
  color: #031e58; /* Синій колір для Baby 😎 */
}

.message-reply-quote strong.reply-quote-user-cloud-color {
  color: #ff75a3; /* Рожевий колір для Pink Cloud ☁️ */
}

/* Стилі для кнопки скасування відповіді */
.cancel-reply-btn {
  background-color: #e9ecef; /* Світло-сірий фон */
  border: 1px solid #ced4da; /* Трохи темніша рамка */
  color: #495057; /* Темно-сірий колір для хрестика */
  border-radius: 50%; /* Робимо кнопку круглою */
  width: 24px;        /* Ширина кнопки */
  height: 24px;       /* Висота кнопки */
  font-size: 1.2rem;  /* Розмір хрестика */
  font-weight: bold;
  line-height: 1;     /* Для кращого вертикального центрування хрестика */
  padding: 0;         /* Прибираємо внутрішні відступи */
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease;
  flex-shrink: 0; /* Щоб кнопка не стискалася */
}
.cancel-reply-btn:hover {
  background-color: #ced4da; /* Темніший фон при наведенні */
  color: #212529; /* Ще темніший хрестик */
}

/* === Стилі для кастомного модального вікна підтвердження === */
.custom-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Напівпрозорий темний фон */
  display: none; /* Початково приховано */
  align-items: center;
  justify-content: center;
  z-index: 1050; /* Поверх інших елементів, але нижче галереї, якщо потрібно */
  padding: 15px;
  box-sizing: border-box;
}

.custom-modal-content {
  background-color: white;
  border: 2px solid #ffb6c1; /* Рожева рамка, як у чата */
  border-radius: 15px;       /* Закруглені кути */
  padding: 25px 30px;
  width: 90%;
  max-width: 380px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  text-align: center;
  position: relative; /* Для позиціонування кнопки закриття */
  animation: fadeInModalContent 0.3s ease-out;
}

@keyframes fadeInModalContent {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.custom-modal-close-btn {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 1.8rem;
  color: #aaa;
  cursor: pointer;
  line-height: 1;
}
.custom-modal-close-btn:hover {
  color: #777;
}

.custom-modal-content p {
  font-size: 1.1rem;
  color: #333;
  margin-top: 0;
  margin-bottom: 25px;
}

.custom-modal-buttons {
  display: flex;
  justify-content: center; /* Кнопки по центру */
  gap: 15px; /* Проміжок між кнопками */
}

.custom-modal-btn {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease, transform 0.1s ease;
  min-width: 100px; /* Мінімальна ширина кнопок */
}

.custom-modal-ok-btn {
  background-color: #dc3545; /* Червоний, як кнопка видалення */
  color: white;
}
.custom-modal-ok-btn:hover {
  background-color: #c82333;
  transform: translateY(-1px);
}

.custom-modal-cancel-btn {
  background-color: #e9ecef; /* Світло-сірий */
  color: #212529;
  border: 1px solid #ced4da;
}
.custom-modal-cancel-btn:hover {
  background-color: #d3d9df;
  transform: translateY(-1px);
}

/* === Стилі для Тамагочі === */
.tamagotchi-area {
  background-color: #fff0f5; /* Світло-рожевий фон, як у поля вводу */
  border: 1px solid #f8cdda; /* Рожева рамка */
  border-radius: 10px;
  padding: 15px;
  margin-top: 10px;
  text-align: center;
  box-shadow: 0 2px 5px rgba(255, 182, 193, 0.3);
}

#tamagotchiName {
  font-size: 1.3rem;
  font-weight: bold;
  color: #d63384; /* Рожевий, як заголовок */
  margin-bottom: 5px;
}

#tamagotchiEmoji {
  font-size: 3rem; /* Великий смайлик */
  margin-bottom: 10px;
  line-height: 1;
}

.tamagotchi-area div {
  font-size: 0.95rem;
  color: #555;
  margin-bottom: 8px;
}

.tamagotchi-area button {
  margin: 5px;
  /* item-btn вже має стилі, але можна додати специфічні, якщо потрібно */
}
